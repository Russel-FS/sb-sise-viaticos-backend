<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <div
    th:fragment="toaster"
    th:if="${success != null or error != null or message != null or param.success != null}"
    id="app-toaster"
    class="fixed bottom-6 inset-x-0 z-[100] flex justify-center pointer-events-none animate-in fade-in slide-in-from-bottom-8 duration-700"
  >
    <div
      class="pointer-events-auto flex items-center gap-4 pl-2 pr-6 py-2 bg-white/90 dark:bg-[#1C1E22]/90 backdrop-blur-2xl border border-gray-100 dark:border-white/10 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.12)] transform transition-all hover:scale-105"
    >
      <!-- Icon Success -->
      <div
        th:if="${error == null}"
        class="w-10 h-10 rounded-full bg-accent-sage dark:bg-accent-sage/20 flex items-center justify-center shrink-0"
      >
        <i
          data-lucide="check"
          class="w-5 h-5 text-accent-forest dark:text-accent-sage"
        ></i>
      </div>

      <!-- Icon Error -->
      <div
        th:if="${error != null}"
        class="w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center shrink-0"
      >
        <i
          data-lucide="alert-circle"
          class="w-5 h-5 text-red-600 dark:text-red-400"
        ></i>
      </div>

      <!-- Contenido -->
      <div class="flex flex-col">
        <span
          class="text-sm font-bold text-gray-900 dark:text-white leading-tight"
        >
          <span
            th:text="${error != null ? 'Error' : (title != null ? title : 'Operación Exitosa')}"
            >Título</span
          >
        </span>
        <span
          class="text-[11px] font-medium text-gray-500 dark:text-gray-400 leading-tight"
        >
          <span
            th:text="${error != null ? error : (success != null ? success : (message != null ? message : 'Los cambios se han guardado correctamente.'))}"
            >Mensaje</span
          >
        </span>
      </div>

      <!-- Cerrar -->
      <button
        onclick="dismissToaster()"
        class="ml-2 w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-white/10 text-gray-400 transition-colors"
      >
        <i data-lucide="x" class="w-4 h-4"></i>
      </button>
    </div>

    <script th:inline="javascript">
      // Auto-cerrar
      setTimeout(() => {
        dismissToaster();
      }, 6000);

      function dismissToaster() {
        const toaster = document.getElementById("app-toaster");
        if (toaster) {
          toaster.classList.add("opacity-0", "translate-y-8");
          toaster.style.transition = "all 0.6s cubic-bezier(0.32, 0.72, 0, 1)";
          setTimeout(() => toaster.remove(), 600);
        }
      }
    </script>
  </div>
</html>
